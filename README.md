# クロスOS マウス共有アプリケーション (Cross-OS Mouse Sharing Application)
**Windows⇔macOS間でシームレスにマウスを共有するリアルタイム常駐アプリ**

以前は Barrier（Synergy のオープンソース版）というツールを使っていましたが、突然原因不明の不具合で使用できなくなった経験がありました。  
「エンジニアとして成長するためには、自分の使うツールを自分の手で作ってみることが最も実践的だ」と考えたことが、本プロジェクトの出発点です。

本アプリケーションは、異なるOS（Windows ⇔ macOS）間で、まるで1台のPCを操作しているかのように**シームレスなマウス共有**を実現する常駐型ツールです。  
WebSocketによるリアルタイム通信、OSネイティブのマウス制御、仮想スクリーン座標の自動遷移といった複数の要素を組み合わせることで、**実用性の高いシステムを自ら設計・構築しました**。

本プロジェクトを通して、通信、UI、OS間連携などフルスタックな技術の横断的理解と実装経験を得ることができました。

---

# 💻 想定
```
+--------------------+   +------------------+
| PC-B-1 (4K)        |   | PC-B-2 (FHD)     |
| 3840x2160          |   | 1920x1080        |
+--------------------+   +------------------+
             ↑
          マウスワープ
             ↓
+-----------------------------+
| PC-A (Mac) 1710x1112        |
+-----------------------------+
```

## 🔧 特徴・アピールポイント


* リアルタイム双方向通信: WebSocketでマウスイベントを低遅延・双方向に送受信。リアルタイム通信設計を経験。

* マルチプラットフォーム対応: macOS（Vue.js）とWindows（JavaFX）間でマウス共有を実現。

* トレイ常駐アプリケーション: Windowsでバックグラウンド動作する常駐アプリを構築し、UXに配慮。

* 仮想スクリーン設計: 複数OS画面を1つの仮想スクリーンとして扱い、画面端でマウスを自動ワープ。

* ネイティブ制御（JNA）: Windowsのマウス操作（移動・クリック・スクロール）をJNAで直接制御。

* モダン技術スタック: Vue.js / Spring Boot / JavaFXを組み合わせ、実践的な開発を経験。

---

## 📐 システム構成図

本システムのアーキテクチャは、以下の3層で構成されています。リアルタイム性が求められるため、WebSocketを主要な通信プロトコルとして採用しました。

```
[Mac (Vue.js)] ⇄ WebSocket ⇄ [Spring Boot Server] ⇄ WebSocket ⇄ [Windows (JavaFX + JNA)]
```

---

## 🧪 使用技術

各コンポーネントは、以下の技術スタックを用いて開発しました。各層で適切な技術選定を行い、実践的な開発スキルを証明しています。

| 層           | 技術                               |
| ----------- | -------------------------------- |
| フロント（Mac）   | Vue.js, JavaScript               |
| サーバー        | Spring Boot 3, Jakarta WebSocket |
| クライアント（Win） | JavaFX, JNA, AWT, Java17         |

---

## 📁 ディレクトリ構成

```
portfolio/
├─ central_server/        # 旧版: 以前のイテレーションで利用されたサーバー実装。現在は spring-websocket-server が主要サーバーです。
├─ spring-websocket-server/ # **主要サーバー:** Spring Boot製WebSocket中継サーバー。異なるクライアント間のマウスイベントをリアルタイムで中継します。
├─ web_desktop/             # **デスクトップクライアントコンポーネントをまとめるディレクトリ**
│  ├─ backend/               # 旧版: web_desktop内の古いバックエンド実装。現在は使用されていません。
│  ├─ desktop_client/       # **Windowsクライアント:** JavaFXで構築された常駐アプリケーション。JNAを用いてWindows OSのマウスを直接制御し、仮想座標システムを管理します。
│  └─ frontend/             # **Mac用フロントエンド:** Vue.jsで構築されたWebアプリケーション。Mac上でのマウスイベントを検出し、WebSocketを通じてサーバーに送信します。
```
## 事前準備
1. ルートディレクトリで .env.example をコピーして .env ファイルを作成してください。
2. .env ファイル内の WS_SERVER_URL を、Spring Boot WebSocketサーバーのアドレスに設定してください。例: WS_SERVER_URL=ws://localhost:8080/ws/mouse または ws://[サーバーのIPアドレス]:8080/ws/mouse。
3. 必要に応じて、web_desktop/desktop_client/src/main/java/com/example/client/MouseClient.java 内の VirtualLayoutManager 設定 (PC-A, PC-B の仮想座標) を、ご自身のディスプレイ構成に合わせて調整してください

---

## 🚀 起動手順
以下の順序で各コンポーネントを起動してください。
1. サーバー（Spring Boot WebSocket Server）
2. WebSocketサーバーがポート8080で起動します。
3. クライアント（Windows: JavaFX）
4. Windowsクライアントが起動し、システムトレイに常駐します。
5. フロントエンド（Mac: Vue.js）
6. ブラウザでVue.jsアプリケーションが起動します。

---

## 🖱️ 操作方法

* MacからWindowsへの遷移: Mac側の画面端（左または右）にマウスカーソルを移動させると、自動的にWindows側の画面へマウスカーソルがワープします。Mac側ではカーソルが非表示になり、Windows側での操作が可能になります。
* WindowsからMacへの遷移: Windows側の画面下端にマウスカーソルを移動させると、自動的にMac側の画面へワープします。Mac側で再度マウス操作が可能になります。
* 操作終了: Windowsクライアントはシステムトレイに常駐します。トレイアイコンを右クリックし「終了」を選択することでアプリケーションを終了できます

---

## 📌 今後の課題

* キーボード入力の共有
* クリップボード共有
* 認証・セキュリティ
* 自動再接続機能や通信障害時の復旧処理の実装  
* 操作ログの保存（セキュリティ・デバッグ目的）

---

## 📝 補足：設計選択と今後の拡張可能性

Mac側のクライアントは、**インストールや更新が不要で手軽に利用できる**という点にメリットを感じ、Vue.jsベースのブラウザアプリとして構築しました。  
これは、初期導入や運用コストを抑えつつ、再現性の高い開発環境を提供することを重視した選択です。

一方で、BarrierのようにOS全体でのマウス操作を完全に再現するには、**macOSネイティブの「グローバルなマウスイベント取得」と「カーソル制御」**を実現する必要があります。  
現時点ではブラウザ制約により範囲は限定されていますが、**将来的にはElectronやSwift等を用いたmacOSネイティブ側の拡張も視野に入れています**。

---

## 📝 ライセンス

MIT License

---

## 📫 作者

* 名前：TTTttt1235
* GitHub：[https://github.com/TTTttt1235](https://github.com/TTTttt1235)
